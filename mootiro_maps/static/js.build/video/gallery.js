(function(){var e,t,n,r,i=400,s=266,o=function(){var e=this;$(".video-entry").live("click",function(t){var n=$(this),r=n.attr("data-service"),i=n.attr("data-video-id");e.play(r,i)})};window.VideoGallery=o,o.prototype.addVideo=function(e){var t=$("#video-gallery-player-list");t.children().length==0&&this.createPlayer(e.service,e.video_id,!1);var n=e.title,r=e.description;n.length>40&&(n=n.substr(0,35)+"..."),r.length>25&&(r=r.substr(0,22)+"...");var i='<li class="video-entry" id="video_'+e.id+'" data-service="'+e.service+'" data-video-id="'+e.video_id+'" title="'+e.title+"\n\n"+e.description+'"><img class="video-thumb" src="'+e.thumbnail_url+'"><span class="video-title">'+n+'</span><span class="video-description">'+r+"</span></li>";t.append(i)},o.prototype.play=function(e,t){this.currentVideo.service!=e&&this.stop(),e=="YT"?this.playYoutube(t):e=="VI"&&this.playVimeo(t),this.currentVideo={service:e,video_id:t}},o.prototype.stop=function(){if(!this.currentVideo)return;this.currentVideo.service=="YT"?this.stopYoutube():this.currentVideo.service=="VI"&&this.stopVimeo()},o.prototype.playYoutube=function(n){t?($(t).height(s),t.loadVideoById(n,0,"large")):this.youtubeInitialized?e=n:this.createYoutubePlayer(n,!0)},o.prototype.stopYoutube=function(e){if(!t)return;t.stopVideo(),$(t).height(0)},o.prototype.playVimeo=function(e){this.currentVideo.video_id==e?r.api_play():($("#vimeoplayer").remove(),$("#video-gallery-player").append('<div id="vimeoplayer"></div>'),this.createVimeoPlayer(e,!0))},o.prototype.stopVimeo=function(e){if(!r)return;r.api_pause(),$(vimeoplayer).hide()},o.prototype.createPlayer=function(e,t,n){this.currentVideo={service:e,video_id:t},e=="YT"?this.createYoutubePlayer(t,n):e=="VI"&&this.createVimeoPlayer(t,n)},o.prototype.createYoutubePlayer=function(t,n){if(this.youtubeInitialized||!t)return;n&&(e=t);var r={allowScriptAccess:"always"},o={id:"youtubeplayer"};swfobject.embedSWF("http://www.youtube.com/v/"+t+"?version=3&enablejsapi=1","youtubeplayer",i.toString(),s.toString(),"8",null,null,r,o),this.youtubeInitialized=!0},o.prototype.createVimeoPlayer=function(e,t){if(!e)return;t?t=1:t=0;var n={clip_id:e,server:"vimeo.com",show_title:1,show_byline:0,show_portrait:0,fullscreen:1,js_api:1,autoplay:t},r={swliveconnect:!0,fullscreen:0,allowscriptaccess:"always",allowfullscreen:!0,wmode:"opaque"},o={};swfobject.embedSWF("http://vimeo.com/moogaloop.swf","vimeoplayer",i.toString(),s.toString(),"9.0.0",null,n,r,o),this.vimeoInitialized=!0},window.onYouTubePlayerReady=function(n){t=document.getElementById("youtubeplayer"),e&&t.loadVideoById(e,0,"large")},window.vimeo_player_loaded=function(){r=document.getElementById("vimeoplayer")}})();